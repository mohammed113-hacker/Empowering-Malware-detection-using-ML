import pandas as pd
import matplotlib.pyplot as plt

dataset = pd.read_csv("Dataset\data.csv",sep="|")
print(dataset.head(10))
print(dataset.describe(include="all"))

dataset_shape = dataset["legitimate"].value_counts().plot(kind="pie",autopct="%1.1f%%",labels=["Malware", "Legitimate"])
plt.title("Dataset Size")
plt.ylabel('')
plt.show()
columns_to_plot = ['Machine','SizeOfOptionalHeader','Characteristics','MajorLinkerVersion','MinorLinkerVersion']
#for column in columns_to_plot:
#    if column != 'md5':  # Skip 'md5' column as it contains unique identifiers
#        values_counts = dataset[column].value_counts()
        
        # Plotting
#       plt.figure(figsize=(10, 6))
#        values_counts.plot(kind='bar')
#        plt.title(f'Frequency of Unique Values in {column}')
#        plt.xlabel(column)
#        plt.ylabel('Frequency')
#        plt.xticks(rotation=45)
#        plt.tight_layout()
#        plt.show()
parameters_to_compare = ['DllCharacteristics','Characteristics','Machine','VersionInformationSize',
                         'MajorSubsystemVersion','Subsystem','SizeOfOptionalHeader',
                         'MajorOperatingSystemVersion']

# Plotting
for param in parameters_to_compare:
    plt.figure(figsize=(10, 6))

    # Group by 'legitimate' column and count unique values in the parameter
    grouped_counts = dataset.groupby('legitimate')[param].value_counts().unstack().fillna(0)

    # Plot grouped bar chart
    grouped_counts.plot(kind='bar', ax=plt.gca(), color=['skyblue', 'salmon'])
    plt.title(f'Comparison of {param} between Malicious and Legitimate Software')
    plt.xlabel(param)
    plt.ylabel('Frequency')
    plt.xticks(rotation=0)
    plt.legend(title='Legitimacy')

    plt.show()
